Jab aap ek multi-agent system banate hain jismein main agent (jaise TriageAgent) ke paas khud ke tools hote hain aur uske sath handoff agents (sub-agents) bhi defined hote hain, to jab user koi query karta hai, system us query ko samajhne ki koshish karta hai aur step-by-step decide karta hai ke is query ko khud handle kare ya kisi aur agent ko handoff kare. Agar query match karti hai kisi tool se jo TriageAgent ke paas available hai (jaise weather_tool), to wo tool call hota hai aur uska result usi waqt generate hota hai, lekin yeh result sirf agent ke internal reasoning ya intermediate step mein use hota hai  ye final output nahi banta. Agar isi query mein aisi sub-query ho jo kisi aur agent (handoff agent) se relevant ho (jaise translation, jo TranslatorAgent ko handoff hota hai), to TriageAgent apna control us handoff agent ko de deta hai. Ab handoff agent (for example, TranslatorAgent) query receive karta hai, usmein apna tool (jaise translate_tool) chalata hai, aur final jawab return karta hai. Jab Runner.run_sync() ke baad aap result.final_output print karte ho, to ye sirf aur sirf usi agent ka jawab hota hai jo sabse aakhri mein chala tha chahe wo handoff agent ho ya koi tool use karne wala agent. Iska matlab yeh hai ke agar pehle weather_tool chal gaya, phir handoff hua TranslatorAgent ko, to weather_tool ka result final output mein kabhi show nahi hota, unless aap manually usko store karo ya agent ko instructions do ke wo sab answers combine kare. Tools ke intermediate results sirf agent ke sochne ka hissa bante hain, na ke final output ka, aur jab handoff hota hai to control aur reasoning dono next agent ko chalay jate hain, aur system sirf last message by last agent ko final_output mein consider karta hai  is wajah se pehle walay tools "ignore" ho jatay hain ya user ko nahi dikhte jab tak explicitly unko include na kiya gaya ho. Isliye system ka design aise hai ke final output sirf usi agent ka hota hai jo sabse last bola ho, aur baaki sab intermediate steps hote hain  agar aapko sab tools ke outputs chahiyein to AgentHooks, result.messages, ya custom merging logic use karna parta hai.

